<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta name="generator" content="Hexo 6.3.0">
  <meta charset="utf-8">
  

  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://fastly.jsdelivr.net">
  <link rel="preconnect" href="https://fastly.jsdelivr.net" crossorigin>
  <link rel="dns-prefetch" href="//unpkg.com">

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  <title>配置文件面面观（上）：配置格式的类型和特点 - RSSBOX</title>

  
    <meta name="description" content="使用软件，就总要和配置文件打交道。对于命令行工具，配置文件往往是调整设置的唯一途径。即使是对于有设置界面的 GUI 软件，编辑配置文件也往往是提高操作效率、解锁隐藏功能的捷径。然而，配置文件的格式繁多，语法多变，经常给新手用户造成困惑。现有文章一般关注特定工具、特定格式的配置方法，而缺少对配置文件的整体性、规律性讨论。 为此，本系列文章计划从使用者的角度出发，介绍配置文件格式、路径和管理方面的通">
<meta property="og:type" content="article">
<meta property="og:title" content="配置文件面面观（上）：配置格式的类型和特点">
<meta property="og:url" content="https://rssbox.mhuig.top/rss/78772d83.html">
<meta property="og:site_name" content="RSSBOX">
<meta property="og:description" content="使用软件，就总要和配置文件打交道。对于命令行工具，配置文件往往是调整设置的唯一途径。即使是对于有设置界面的 GUI 软件，编辑配置文件也往往是提高操作效率、解锁隐藏功能的捷径。然而，配置文件的格式繁多，语法多变，经常给新手用户造成困惑。现有文章一般关注特定工具、特定格式的配置方法，而缺少对配置文件的整体性、规律性讨论。 为此，本系列文章计划从使用者的角度出发，介绍配置文件格式、路径和管理方面的通">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cors.mhuig.top/?r=https://sspai.com&url=https://cdnfile.sspai.com/10/31/2025/article/39936f6a-4c02-9ee2-8a55-d4da6abf7eff.jpeg">
<meta property="article:published_time" content="2025-10-31T14:49:26.000Z">
<meta property="article:modified_time" content="2025-10-31T14:49:26.000Z">
<meta property="article:author" content="MHuiG">
<meta property="article:tag" content="少数派">
<meta property="article:tag" content="少数派首页">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cors.mhuig.top/?r=https://sspai.com&url=https://cdnfile.sspai.com/10/31/2025/article/39936f6a-4c02-9ee2-8a55-d4da6abf7eff.jpeg">
  
  

  <!-- feed -->
  
    <link rel="alternate" href="/atom.xml" title="RSSBOX" type="application/atom+xml">
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  

  

  


  
</head>

<body>
  




  <div class="l_body" id="start">
    <aside class="l_left" layout="post">
    


<header class="header">

<div class="logo-wrap"><a class="avatar" target="_blank" rel="noopener" href="https://mhuig.top/"><div class="bg" style="opacity:0;background-image:url(https://static.mhuig.top/gh/cdn-x/placeholder@1.0.2/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="/avatar.png" onerror="javascript:this.classList.add('error');this.src='https://static.mhuig.top/gh/cdn-x/placeholder@1.0.1/image/2659360.svg';"></a><a class="title" href="/"><div class="main">RSSBOX</div><div class="sub normal cap">MHuiGのRSS订阅</div><div class="sub hover cap" style="opacity:0">rssbox.mhuig.top</div></a></div>
<nav class="menu dis-select"><a class="nav-item active" href="/">RSS</a><a class="nav-item" target="_blank" rel="noopener" href="https://blog.mhuig.top/">博客</a><a class="nav-item" target="_blank" rel="noopener" href="https://mhuig.top/">关于</a></nav></header>

<div class="widgets">

<div class="widget-wrap single" id="toc"><div class="widget-header cap dis-select"><span class="name">本文目录</span></div><div class="widget-body fs14"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">键—值对格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">序列化格式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">XML 格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">JSON、YAML 和 TOML</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">代码和 DSL 格式</span></a></li></ol></div></div></div>


</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" href="https://github.com/MHuiG" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://static.mhuig.top/gh/cdn-x/placeholder@1.0.3/social/08a41b181ce68.svg"></a><a class="social" href="https://music.163.com/#/user/home?id=63035382" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://static.mhuig.top/gh/cdn-x/placeholder@1.0.3/social/3845874.svg"></a><a class="social" href="/contact/" rel="noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://static.mhuig.top/gh/cdn-x/placeholder@1.0.3/social/a1b00e20f425d.svg"></a></div></footer>

    </aside>
    <div class="l_main">
      

      


<div class="bread-nav fs12"><div id="breadcrumb"><a class="cap breadcrumb" href="/">主页</a><span class="sep"></span><a class="cap breadcrumb" href="/">文章</a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/%E5%B0%91%E6%95%B0%E6%B4%BE/">少数派</a> <span class="sep"></span> <a class="cap breadcrumb-link" href="/categories/%E5%B0%91%E6%95%B0%E6%B4%BE/%E5%B0%91%E6%95%B0%E6%B4%BE%E9%A6%96%E9%A1%B5/">少数派首页</a></div><div id="post-meta">发布于&nbsp;<time datetime="2025-10-31T14:49:26.000Z">2025-10-31</time></div></div>

<article class="content md post">
<h1 class="article-title"><span>配置文件面面观（上）：配置格式的类型和特点</span></h1>
<div>
<img class="lazy" alt="Article Cover Image" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cors.mhuig.top/?r=https://sspai.com&url=https://cdnfile.sspai.com/10/31/2025/article/39936f6a-4c02-9ee2-8a55-d4da6abf7eff.jpeg" style="display: block; margin: 0 auto;"><br><p>使用软件，就总要和配置文件打交道。对于命令行工具，配置文件往往是调整设置的唯一途径。即使是对于有设置界面的 GUI 软件，编辑配置文件也往往是提高操作效率、解锁隐藏功能的捷径。然而，配置文件的格式繁多，语法多变，经常给新手用户造成困惑。现有文章一般关注特定工具、特定格式的配置方法，而缺少对<strong>配置文件</strong>的整体性、规律性讨论。</p>
<p>为此，本系列文章计划从使用者的角度出发，介绍配置文件格式、路径和管理方面的通用知识，希望能帮助读者建立起关于配置文件的整体印象和操作直觉，从而在面对陌生的工具和文件时，仍能形成入手的思路。本篇是上篇，讨论配置文件的分类及各自特点，以及什么是「好」的配置文件格式。</p>
<p>一一列举配置文件的格式，显然是不现实的。但按照由简到繁的顺序，大多数格式都可以划分为以下五类之一：(1) 键—值对格式、(2) 序列化格式、(3) DSL（领域特定语言）格式、(4) 代码格式，以及 (5) 二进制格式。下面分别讨论。</p>
<h2><strong>键—值对格式</strong></h2>
<p>键—值对是最简单的一类格式——至少在表面上。顾名思义，这类格式只包括一系列配置项的名称及其内容。</p>
<p>最典型的键—值对配置，就是许多命令行工具都支持的环境变量配置文件 <code>.env</code>。所谓环境变量，是指软件运行的「外部环境」，通常包括一些临时、仅限于单次运行的参数，例如搜索路径、工作路径、API 密钥、侦听端口等。</p>
<p>ENV 文件就是对环境变量名称和值的简单列举。这里，<code>.env</code> 只是一个习惯命名，主要是为了利用以 <code>.</code> 开头的文件在类 Unix 系统中会默认隐藏的特性。但实际上只要软件支持，可以把任何外部文件当作环境变量列表来读取。</p>
<p>假设你手上有一个直径 78 毫米、重 215 克的富士苹果，用 ENV 的语法来表示就是：</p>
<pre class="language-code-line"><code>VARIETY=fuji
DIAMETER=78
WEIGHT=215</code></pre>
<p>实践中，Docker Compose 就广泛使用 ENV 文件来为将要运行的容器设定端口、挂载路径等；近来许多命令行 AI 工具也会从 <code>.env</code> 中读取 OpenAI 等模型供应商的 API 密钥。如果一个命令默认读取或者支持通过参数传入 ENV 文件，其效果就如同将这些参数附加在命令名称前运行（<code>VAR_1=val_1 [VAR_n=val_n...] command</code>）。</p>
<p>ENV 文件的一大缺点在于没有通用的语法标准。按照传统的 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.man7.org/linux/man-pages/man1/export.1p.html"><code>export(1p)</code> 命令</a>语法，变量名称区分大小写（惯例上全大写），等号前后不得有空格，而双引号中的变量会被进一步展开为其实际值。但许多语言和工具对这个语法做了修改和扩展，例如有的会自动修剪等号前后的空格，有的允许用 <code>#</code> 添加行内和整行注释等。因此在编写时，应当注意查看相应的文档，以免出错。</p>
<p>比 <code>.env</code> 稍微「高级」一点的是 INI 文件。INI 是 MS-DOS 和早期 Windows 主要使用的配置文件格式，直到注册表机制逐步取代了 INI 文件在 Windows 平台上的大部分角色。即使如此，INI 仍然在许多场合中广泛使用，最典型的就是 Windows 中用来设置文件夹属性的 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://learn.microsoft.com/en-us/windows/win32/shell/how-to-customize-folders-with-desktop-ini"><code>Desktop.ini</code></a>。</p>
<p>除此之外，许多第三方软件使用的 <code>.conf</code>、<code>.cfg</code> 之类格式，也大体遵循 INI 的语法（例如国内用户喜闻乐见的一些网络调试软件）；<code>git config</code> 命令写入的配置文件，以及 systemd 用来运行任务的单元文件，本质上也是 INI。</p>
<p>INI 的语法与 ENV 非常相似，每行为一个键值对，主要的区别在于能通过「分节」（sections）将配置划分为多个部分，以及原生支持注释。设想你现在手上有两个苹果，那么一个 <code>.env</code> 就不够用了，但 INI 就可以同时容纳两个苹果的信息：</p>
<pre class="language-code-line"><code>[apple_1]
VARIETY=fuji
DIAMETER=78
WEIGHT=215

<p>[apple_2]<br>VARIETY&#x3D;gala<br>DIAMETER&#x3D;70<br>WEIGHT&#x3D;185</p></code></pre><p></p>
<p>可惜的是，INI 的语法标准也非常混乱。其首倡者微软并没有提供正式文档，只在用于读取 INI 的 Windows API 函数 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://learn.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-getprivateprofilestring?redirectedfrom=MSDN#remarks"><code>GetPrivateProfileString</code> 文档</a>中做了模糊说明。根据这个准官方规则，分节和键名都不区分大小写，分节也不支持嵌套，但很多<a target="_blank" rel="external nofollow noopener noreferrer" href="https://en.wikipedia.org/wiki/INI_file#Comparison_of_INI_parsers">第三方实现</a>都不同程度地修改了这些规定。</p>
<p>看到这里，你可能会理解为什么前文说键—值对格式只是「表面上」简单。一方面，由于缺乏通行标准，你很难在不查阅文档的情况下，知道一个文件究竟使用的是 ENV 或 INI 的哪种变体；凭直觉编写很容易导致错误，解析器之间也难以兼容。另一方面，键—值对格式中是不存在「类型」（type）之分的。也就是说，所有的值都是字符串，例如软件读到一个 <code>0</code>，需要根据上下文自行判断应当将它当作数值、布尔值还是文本。这就给 bug 留下了很多空间。</p>
<p>当然，即使有上述缺陷，键—值对格式易读、易用的优势仍然是明显的，能够胜任许多内容简单、数量有限的配置需求，这也是它们仍然如此常见的原因。</p>
<h2><strong>序列化格式</strong></h2>
<p>键—值对格式描述的数据结构是扁平的，就像一个只有两列的表格。但很多时候，配置文件需要描述的对象是立体的，涉及到数据的层层嵌套。试想现在让你描述的不是两个苹果，而是两筐苹果；除了需要记录每个筐和苹果各自的属性，还需要记录苹果与筐的从属关系。这时，键—值对就无法胜任了。</p>
<p>这个需求可以通过引入序列化格式来解决。所谓序列化（serialization），是指将数据结构或对象转化为一串可存储或传输的文本。这样，软件在下次运行时，就可以读取这些文本，重新转换为所需的数据或运行状态。</p>
<p>目前，常用于配置文件的序列化格式主要包括两大类：一类是 XML，另一类是 JSON 及基本等效的 YAML 和 TOML。下面分别介绍。</p>
<h3><strong>XML 格式</strong></h3>
<p>先看 XML（Extensible Markup Language，可扩展标记语言）。从这个名称就可以看出，它本是一种以文档为中心的语言，最初的用途是为了创建同时易于人类阅读和机器解析的数字文档，也是网页文件格式 HTML 的近亲。可以说，充当配置文件格式只是它的一项「兼职」。</p>
<p>如果要用 XML 表示两筐苹果，一种可行的方法是：</p>
<pre class="language-code-line language-xml"><code>&lt;buckets&gt;
    &lt;bucket id="1" origin="Aomori"&gt;
        &lt;apple id="1" variety="fuji" diameter="78" weight="215"&gt;&lt;/apple&gt;
        &lt;apple id="2" variety="gala" diameter="70" weight="185"&gt;&lt;/apple&gt;
        &lt;!-- ... --&gt;
    &lt;/bucket&gt;
    &lt;bucket id="2" origin="Washington"&gt;
        &lt;apple id="3" variety="honeycrisp" diameter="76" weight="205"&gt;&lt;/apple&gt;
        &lt;!-- ... --&gt;
    &lt;/bucket&gt;
&lt;/buckets&gt;</code></pre>
<p>从这个简单的例子就可以看出，XML 其实不太适合用来表达配置文件这类非文档数据。它的语法是针对「混合内容」优化的：文本夹在语义标签之间，标签中给出文本的类型和属性。但用这种语法来表达没有多少实质文本内容的数据结构，就会显得非常啰嗦，还会带来一些编排上的困惑。</p>
<p>例如，之所以说上面的例子只是「一种可行的方法」，是因为这种写法将数据都放在了尖括号内的属性里。但这并不是必须的，将同样的信息写在子元素里也完全说得通：</p>
<pre class="language-code-line language-xml"><code>&lt;buckets&gt;
    &lt;bucket&gt;
        &lt;id&gt;1&lt;/id&gt;
        &lt;origin&gt;Aomori&lt;/origin&gt;
        &lt;apples&gt;
            &lt;apple&gt;&lt;id&gt;1&lt;/id&gt;&lt;variety&gt;fuji&lt;/variety&gt;&lt;diameter&gt;78&lt;/diameter&gt;&lt;weight&gt;215&lt;/weight&gt;&lt;/apple&gt;
            &lt;apple&gt;&lt;id&gt;2&lt;/id&gt;&lt;variety&gt;gala&lt;/variety&gt;&lt;diameter&gt;70&lt;/diameter&gt;&lt;weight&gt;185&lt;/weight&gt;&lt;/apple&gt;
            &lt;!-- ... --&gt;
        &lt;/apples&gt;
    &lt;/bucket&gt;
    &lt;bucket&gt;
        &lt;id&gt;2&lt;/id&gt;
        &lt;origin&gt;Washington&lt;/origin&gt;
        &lt;apples&gt;
            &lt;apple&gt;&lt;id&gt;3&lt;/id&gt;&lt;variety&gt;honeycrisp&lt;/variety&gt;&lt;diameter&gt;76&lt;/diameter&gt;&lt;weight&gt;205&lt;/weight&gt;&lt;/apple&gt;
            &lt;!-- ... --&gt;
        &lt;/apples&gt;
    &lt;/bucket&gt;
&lt;/buckets&gt;</code></pre>
<p>这两种写法<a target="_blank" rel="external nofollow noopener noreferrer" href="https://stackoverflow.com/questions/33746/xml-attribute-vs-xml-element">各有利弊</a>，但都跟简洁搭不上关系。</p>
<p>实际上，XML 之所以会成为一种广泛使用的配置文件格式，很大程度上可能是因为千禧年前后也没有更好的选择。在 XML 于 1998 年推出时，它是为数不多由知名标准化组织（W3C）推出、有广泛跨语言和跨平台支持、兼具良好规范性和扩展性的格式。加上获得 Java 和微软 .NET 生态的推广，XML 在本世纪早期的流行也是可以理解的。</p>
<p>如今，XML 仍在许多企业软件和开发环境中用作配置文件格式。例如，用于批量自动安装 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/update-windows-settings-and-scripts-create-your-own-answer-file-sxs">Windows</a>（<code>unattend.xml</code>）和 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://learn.microsoft.com/en-us/microsoft-365-apps/deploy/office-deployment-tool-configuration-options">Office</a> 的配置文件；Android 开发中指定应用程序属性（<code>AndroidManifest.xml</code>）和布局（<code>res/layout/*.xml</code>）的配置文件；等等。</p>
<p>此外，苹果系统中广泛使用的配置格式 <code>.plist</code> 也支持 XML 作为序列化形式之一。例如，macOS 和 iOS 应用中用于自我描述的 <code>Info.plist</code>，以及 <code>/Library/LaunchAgents</code> 等位置下的自启动项配置文件，打开后都是 XML 格式。</p>
<p>还是以上面那两筐苹果为例，如果用 plist 的语法来表示，会是这样（略去开头元信息）：</p>
<pre class="language-code-line language-xml"><code>&lt;plist version="1.0"&gt;
  &lt;dict&gt;
    &lt;key&gt;buckets&lt;/key&gt;
    &lt;array&gt;
      &lt;dict&gt;
        &lt;key&gt;id&lt;/key&gt;&lt;integer&gt;1&lt;/integer&gt;
        &lt;key&gt;origin&lt;/key&gt;&lt;string&gt;Aomori&lt;/string&gt;
        &lt;key&gt;apples&lt;/key&gt;
        &lt;array&gt;
          &lt;dict&gt;
            &lt;key&gt;id&lt;/key&gt;&lt;integer&gt;1&lt;/integer&gt;
            &lt;key&gt;variety&lt;/key&gt;&lt;string&gt;fuji&lt;/string&gt;
            &lt;key&gt;diameter&lt;/key&gt;&lt;integer&gt;78&lt;/integer&gt;
            &lt;key&gt;weight&lt;/key&gt;&lt;integer&gt;215&lt;/integer&gt;
          &lt;/dict&gt;
          &lt;dict&gt;
            &lt;key&gt;id&lt;/key&gt;&lt;integer&gt;2&lt;/integer&gt;
            &lt;key&gt;variety&lt;/key&gt;&lt;string&gt;gala&lt;/string&gt;
            &lt;key&gt;diameter&lt;/key&gt;&lt;integer&gt;70&lt;/integer&gt;
            &lt;key&gt;weight&lt;/key&gt;&lt;integer&gt;185&lt;/integer&gt;
          &lt;/dict&gt;
          &lt;!-- ... --&gt;
        &lt;/array&gt;
      &lt;/dict&gt;
      &lt;dict&gt;
        &lt;key&gt;id&lt;/key&gt;&lt;integer&gt;2&lt;/integer&gt;
        &lt;key&gt;origin&lt;/key&gt;&lt;string&gt;Washington&lt;/string&gt;
        &lt;key&gt;apples&lt;/key&gt;
        &lt;array&gt;
          &lt;dict&gt;
            &lt;key&gt;id&lt;/key&gt;&lt;integer&gt;3&lt;/integer&gt;
            &lt;key&gt;variety&lt;/key&gt;&lt;string&gt;honeycrisp&lt;/string&gt;
            &lt;key&gt;diameter&lt;/key&gt;&lt;integer&gt;76&lt;/integer&gt;
            &lt;key&gt;weight&lt;/key&gt;&lt;integer&gt;205&lt;/integer&gt;
          &lt;/dict&gt;
          &lt;!-- ... --&gt;
        &lt;/array&gt;
      &lt;/dict&gt;
    &lt;/array&gt;
  &lt;/dict&gt;
&lt;/plist&gt;</code></pre>
<p>可以看出，<code>.plist</code> 虽然形式上是 XML，但采用的是一种非常有限并且古怪的语法：每个 <code>.plist</code> 总是有一个外层的字典元素 <code>&lt;dict&gt;</code>；其中，每个键元素 <code>&lt;key&gt;</code> 的数据并不存储在其属性或子元素中，而是存储在紧邻其后的一个与数据类型相应的平行元素（<code>&lt;string&gt;</code>、<code>&lt;integer&gt;</code>、<code>&lt;array&gt;</code> 等）中，看起来尤其冗长。因此，系统中更多无需面向用户的 <code>.plist</code> 文件采用的是后文将介绍的二进制格式。</p>
<h3><strong>JSON、YAML 和 TOML</strong></h3>
<p>如果说 XML 格式是被「抓壮丁」征用作配置文件格式的，那么 JSON（JavaScript Object Notation，读作 Jason）就可以说是一种天生适合存储配置的格式。这个起始于 21 世纪初的格式衍生自 JavaScript 语言，从一开始就是为了满足服务器和浏览器之间数据传输的需求而制定的。因此，与 XML 相比，JSON 的语法明显简洁、易读许多，而且与现代程序语言中的常用数据类型高度匹配，不需要额外声明对应关系。</p>
<p>这是用 JSON 来表示上面那两筐苹果的效果：</p>
<pre class="language-code-line language-json"><code>&#123;
  "buckets": [
    &#123;
      "id": 1,
      "origin": "Aomori",
      "apples": [
        &#123; "id": 1, "variety": "fuji", "diameter": 78, "weight": 215 &#125;,
        &#123; "id": 2, "variety": "gala", "diameter": 70, "weight": 185 &#125;
        // ...
      ]
    &#125;,
    &#123;
      "id": 2,
      "origin": "Washington",
      "apples": [
        &#123; "id": 3, "variety": "honeycrisp", "diameter": 76, "weight": 205 &#125;
        // ...
      ]
    &#125;
  ]
&#125;</code></pre>
<p>（<code>//</code> 开头的注释并非有效 JSON 语法，此处仅为简洁而加入，见后文说明。）</p>
<p>JSON 的便利性使它成为目前最常见的配置文件格式，可能没有之一。例如，Chrome 浏览器用户文件夹中存储设置和状态的 <code>Preferences</code> 和 <code>Local State</code> 文件的内容都是 JSON 格式；Visual Studio Code 分别用 <code>settings.json</code> 和 <code>keybindings.json</code> 来存放用户设置和自定义快捷键；其他使用 Electron 封装的 Web 应用也大多使用 JSON 作配置。开发环境中，最常见的用例大概是每个 Node.js 项目都会产生的依赖项记录文件 <code>package.json</code>。又因为对 JSON 的支持非常广泛，即使不是基于 JavaScript 的软件也经常用它来作配置文件，例如 PyTorch、JupyterLab 这些 Python 生态的软件。</p>
<p>不过，JSON 也有很多限制。被抱怨最多的问题当然是不支持注释——即使作为 JSON 源头的 JavaScript 中有注释语法。这其实是其发明者在早年刻意为之的设计。<a target="_blank" rel="external nofollow noopener noreferrer" href="https://web.archive.org/web/20190112173904/https://plus.google.com/118095276221607585885/posts/RK8qyGVaGSr">在他看来</a>，JSON 就应当是纯粹的数据，即使有注释，也应该在送进解析器之前删除。这或许有一定道理，但在配置文件的用例中就显得不太方便了，因为通过注释来提示文件结构和合法值是非常常见的需求。因此，许多 JSON 格式的配置（例如上面提到的 VS Code）实际上用的是一种称为 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://jsonc.org/">JSONC</a>（JSON with Comments）的变体，其中明确允许添加语法和 JavaScript 类似的注释。</p>
<p>除此之外，JSON 在有些时候也不是那么易读易用。例如，如果要存储多行文本，只能通过转义字符 <code>\n</code> 来换行，让文件看起来非常臃肿。此外，JSON 完全依赖括号和逗号来体现数据结构，换行和缩进是可选的；一旦数据变复杂，就很难通过这些有限的视觉提示辨识层级，配平括号也会成为一个头疼问题。</p>
<p>正是因为这些问题，一个明显比 JSON 对人类更友好的格式——YAML 成为了很多软件青睐的配置文件格式。如果用 YAML 来表达那两筐苹果，效果会是这样：</p>
<pre class="language-code-line language-yaml"><code>buckets:
  - id: 1
    origin: Aomori
    apples:
      - id: 1
        variety: fuji
        diameter: 78
        weight: 215
      - id: 2
        variety: gala
        diameter: 70
        weight: 185
      # ...
  - id: 2
    origin: Washington
    apples:
      - id: 3
        variety: honeycrisp
        diameter: 76
        weight: 205
      # ...</code></pre>
<p>即使你不熟悉 YAML 的语法，也能很清晰地看出这里的层级结构。与 JSON 不同，YAML 中的换行和缩进具有语法含义，每一行都是一个节点，缩进越大的节点层级越深。由于不再需要使用括号和逗号，并且可以自动识别多种数据类型，YAML 比 JSON 看起来更简洁，也非常适合「手写」。再加上 YAML 刻意保持了与 JSON 的高度兼容——任何有效的 JSON 片段都可以合乎语法地直接插入在 YAML 文件里——YAML 的定位在很大程度上已经变成了「JSON 的友好版本」，尽管它其实比 JSON 诞生更早、功能也更多。</p>
<p>目前，YAML 在开发和运维工具中用得非常广泛，包括持续集成中的自动化工具 GitHub Actions、容器工具 Kubernetes 和 Docker Compose，静态站点生成器 Jekyll 和 Docusaurus 等等。当然，还有一批国内用户喜闻乐见的网络调试工具。</p>
<p>但凡事难两全，一个语言对人类越友好，往往对机器就越不友好。正是因为 YAML 的语法省去了很多「脚手架」，在机器解析时就可能导致歧义。一个最典型的翻车案例就是所谓的「挪威问题」：由于早期版本的 YAML 将<a target="_blank" rel="external nofollow noopener noreferrer" href="https://yaml.org/type/bool.html">二十多种值</a>（包括 true/false、yes/no、on/off 的各种大小写和简写）都接受为布尔值，因此如果数据中出现挪威的国家代码 <code>NO</code>，并且忘记了在两侧加引号来强制声明字符串类型，本来是「挪威」的值就会被当作布尔值「假」，从而引发各种 bug。虽然后来的 1.2 版通过将布尔值限制为 <code>true</code> 和 <code>false</code> 修复了这个问题，但野外的许多解析器仍然采用 1.1 版的宽松解读，导致「挪威问题」直到近年还经常被翻出来嘲笑。</p>
<p>除此之外，依靠缩进来表示层级，虽然写起来方便，但也更容易出错。很多时候，少按一下 Tab、多打一个连字符，出来的效果就完全南辕北辙了。更讨厌的是，这种错误很多时候是语法检查器也检测不出来的，因为弄错缩进写出来的 YAML 很可能在语法上还是有效的，只有放到软件里报错了才会发觉。</p>
<p>因此，如果你在用的软件选择了 YAML 作为配置格式，在修改时应该倍加小心。为此，可以使用支持语法高亮和自动缩进的编辑器来减少出错概率，还可以考虑写好以后用工具转换为 JSON（网上有很多此类工具），这样因为手滑导致的语法问题就容易发现了。</p>
<p>最后要介绍的 TOML 则可以看作 JSON 和 YAML 之间的一个平衡点。TOML 的意思是 Tom’s Obvious, Minimal Language（Tom 是作者的名字；<a target="_blank" rel="external nofollow noopener noreferrer" href="https://en.wikipedia.org/wiki/Tom_Preston-Werner">他是</a> GitHub 的联合创始人和前 CEO），对自己的<a target="_blank" rel="external nofollow noopener noreferrer" href="https://toml.io/en/v1.0.0#objectives">明确定位</a>就是「简洁的配置文件格式」。</p>
<p>那实际上是否如此呢？不妨直接看看 TOML 语法要如何表达我们的两筐苹果：</p>
<pre class="language-code-line language-toml"><code>[[buckets]]
id = 1
origin = "Aomori"

<p>[[buckets.apples]]<br>id &#x3D; 1<br>variety &#x3D; “fuji”<br>diameter &#x3D; 78<br>weight &#x3D; 215</p>
<p>[[buckets.apples]]<br>id &#x3D; 2<br>variety &#x3D; “gala”<br>diameter &#x3D; 70<br>weight &#x3D; 185</p>
<h1 id="…"><a href="#…" class="headerlink" title="…"></a>…</h1><p>[[buckets]]<br>id &#x3D; 2<br>origin &#x3D; “Washington”</p>
<p>[[buckets.apples]]<br>id &#x3D; 3<br>variety &#x3D; “honeycrisp”<br>diameter &#x3D; 76<br>weight &#x3D; 205</p>
<h1 id="…-1"><a href="#…-1" class="headerlink" title="…"></a>…</h1></code></pre><p>远看起来，TOML 确实具有与 YAML 类似的简洁外观。你可能还会注意到很明显的借鉴 INI 的痕迹；的确，TOML 在语法上可以看作是 INI 的超集。</p>
<p>但再仔细观察，就会注意到 TOML 要远比 YAML 严格。例如，就像在 JSON 中一样，所有的字符串都要用引号包裹，并且缩进不再具有语法含义。数据结构的表达也很繁琐：要表示 <code>buckets</code> 数组中的一个元素下的 <code>apples</code> 数组，就必须对 <code>apples</code> 数组的每个元素都重复一次它的完整路径 <code>[[buckets.apples]]</code>。</p>
<p>诚然，这仍然比 JSON 要易读一些，并且避免了 YAML 在类型和缩进方面的许多陷阱。但反过来说，TOML 的这种「中庸之道」也让它的地位显得很尴尬，既失去了 INI 和 YAML 的部分简洁性，又没有 JSON 的广泛支持。因此，对 TOML 的评价相当分化，虽然不少人表示欣赏它的严谨，但对于它存在必要性的批评就没有停止过。同时，身为配置格式中的「后来者」，它也很难取得和 JSON、YAML 类似的采用率。目前，TOML 的最常见应用是 Rust 项目中的清单文件 <code>Cargo.toml</code> 和 Python 项目中的 <code>pyproject.toml</code>，其他只有零星一些项目用它作配置文件，并且一般只是几种可选格式之一。</p>
<h2><strong>代码和 DSL 格式</strong></h2>
<p>到目前为止，我们介绍的配置文件格式存储的都是数据，区别只在于用于记录数据的语法和结构不同。但有些时候，我们还希望通过配置文件存储逻辑，也就是指定在某种条件下执行某些操作。这就超出了键—值对和序列化的能力范围（尽管实践中有很多存在争议的「滥用」方法，见后文）；而最明显的解决方案，当然是用程序逻辑的天然载体——代码充当配置格式。</p>
</div>

<div>
<div class="tag-plugin link dis-select"><a class="link-card plain" title="配置文件面面观（上）：配置格式的类型和特点" href="https://sspai.com/post/103456" target="_blank" rel="external nofollow noopener noreferrer"><div class="left"><span class="title">配置文件面面观（上）：配置格式的类型和特点</span><span class="desc fs12">https://sspai.com/post/103456</span></div><div class="right"><div class="lazy img" data-bg="https://static.mhuig.top/gh/cdn-x/placeholder@1.0.1/link/8f277b4ee0ecd.svg"></div></div></a></div>
</div>



<div class="article-footer reveal fs14"><section id="license"><div class="header"><span>许可协议</span></div><div class="body"><p>本文采用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/me-shaon/GLWTPL/blob/master/translations/LICENSE_zh-CN">GLWT（Good Luck With That，祝你好运）公共许可证</a> 许可协议。</p>
</div></section></div>

</article>

<div class="related-wrap reveal" id="read-next"><section class="header cap theme"><span>接下来阅读</span></section><section class="body fs14"><a id="next" href="/rss/ccb936b6.html">本月玩什么｜羊蹄山、宝可梦Z-A、天外世界2<span class="note">较早</span></a><div class="line"></div><a id="prev" href="/rss/cb218f94.html">改变世界的编程语言MoonBit：配置系统介绍(下)<span class="note">较新</span></a></section></div>


<div class="related-wrap reveal" id="related-posts">
    <section class="header">
      <div class="title cap theme">您可能感兴趣的文章</div>
    </section>
    <section class="body">
    <div class="related-posts"><a class="item" href="/rss/2f60cc5e.html" title="App+1｜一个应用搞定多种笔记需求，零碎想法也有好去处：Re:card"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cors.mhuig.top/?r=https://sspai.com&url=https://cdnfile.sspai.com/2025/10/30/article/ce77fdd1-323f-4b76-1229-8b82cabe8447.png"></div><span class="title">App+1｜一个应用搞定多种笔记需求，零碎想法也有好去处：Re:card</span></a><a class="item" href="/rss/ec93ac84.html" title="从书房到工作室，只需咔嗒一声：Khadas Mind 2 模块化工作流体验"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cors.mhuig.top/?r=https://sspai.com&url=https://cdnfile.sspai.com/2025/10/31/article/d58f863d-c0f6-253f-5684-32f92300a0ed.jpeg"></div><span class="title">从书房到工作室，只需咔嗒一声：Khadas Mind 2 模块化工作流体验</span></a><a class="item" href="/rss/5a751dd3.html" title="新玩意 224｜少数派的编辑们最近买了啥？"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cors.mhuig.top/?r=https://sspai.com&url=https://cdnfile.sspai.com/2025/10/30/article/4372d145-6b84-50e5-db4d-555469659526.png"></div><span class="title">新玩意 224｜少数派的编辑们最近买了啥？</span></a><a class="item" href="/rss/a192456a.html" title="日本红枫季应该怎么玩？这是我的关西攻略"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cors.mhuig.top/?r=https://sspai.com&url=https://cdnfile.sspai.com/2025/10/23/953476ca53235641c4e21549163793ee.jpg"></div><span class="title">日本红枫季应该怎么玩？这是我的关西攻略</span></a><a class="item" href="/rss/85e9aaa.html" title="旅行中一定会买什么：10 位少数派的旅途收藏与独家记忆"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cors.mhuig.top/?r=https://sspai.com&url=https://cdnfile.sspai.com/2025/10/31/article/66f25da9-370c-73a0-9b79-c7cff89a70ba.jpeg"></div><span class="title">旅行中一定会买什么：10 位少数派的旅途收藏与独家记忆</span></a><a class="item" href="/rss/ccb936b6.html" title="本月玩什么｜羊蹄山、宝可梦Z-A、天外世界2"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cors.mhuig.top/?r=https://sspai.com&url=https://cdnfile.sspai.com/2025/10/31/cb803d64807fa687781fc4847bc7650c.jpg"></div><span class="title">本月玩什么｜羊蹄山、宝可梦Z-A、天外世界2</span></a><a class="item" href="/rss/3f560623.html" title="派早报：iQOO Neo11 发布、Grammarly 完成品牌重组等"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cors.mhuig.top/?r=https://sspai.com&url=https://cdnfile.sspai.com/10/31/2025/article/5e3abbda-c458-67f8-91d4-8d5a0007e242.png"></div><span class="title">派早报：iQOO Neo11 发布、Grammarly 完成品牌重组等</span></a><a class="item" href="/rss/c4ead271.html" title="本周看什么 | 最近值得一看的 10 部作品"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cors.mhuig.top/?r=https://sspai.com&url=https://cdnfile.sspai.com/2025/10/31/article/716d5772-492a-08f7-8740-34296b4f6f34.png"></div><span class="title">本周看什么 | 最近值得一看的 10 部作品</span></a><a class="item" href="/rss/3991c31.html" title="鸿蒙 1024｜新平台、老地方：在鸿蒙生态打造心的栖息地"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cors.mhuig.top/?r=https://sspai.com&url=https://cdnfile.sspai.com/2025/10/20/c7ba869578103751d2f05e1920837a4d.png"></div><span class="title">鸿蒙 1024｜新平台、老地方：在鸿蒙生态打造心的栖息地</span></a><a class="item" href="/rss/ae06c14.html" title="Full Page Screenshot，告别单调截图，一键生成惊艳视觉作品"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cors.mhuig.top/?r=https://sspai.com&url=https://cdnfile.sspai.com/2025/10/21/7c84d326258dface3949318568ea864a.jpeg"></div><span class="title">Full Page Screenshot，告别单调截图，一键生成惊艳视觉作品</span></a><a class="item" href="/rss/f287e8fa.html" title="iPad Mini：盖泡面也可以是生产力"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cors.mhuig.top/?r=https://sspai.com&url=https://cdnfile.sspai.com/2025/10/21/4e53e723cc02ffe89d6e9da4643f2c45.jpeg"></div><span class="title">iPad Mini：盖泡面也可以是生产力</span></a><a class="item" href="/rss/c652fa90.html" title="ChatGPT Atlas Agent 如何帮你采集数据和调研？"><div class="img"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cors.mhuig.top/?r=https://sspai.com&url=https://cdnfile.sspai.com/2025/10/25/45dfd71cacb12600cb193c384c12208b.png"></div><span class="title">ChatGPT Atlas Agent 如何帮你采集数据和调研？</span></a></div></section></div>





      
<footer class="page-footer reveal fs12"><hr><div class="sitemap"><div class="sitemap-group"><span class="fs14">RSS</span><a href="/">近期</a><a href="/categories/">分类</a><a href="/tags/">标签</a><a href="/archives/">归档</a></div><div class="sitemap-group"><span class="fs14">Support</span><a target="_blank" rel="noopener" href="https://blog.mhuig.top/">博客</a><a target="_blank" rel="noopener" href="https://api.mhuig.top/">API</a><a target="_blank" rel="noopener" href="https://ssl.mhuig.top/">SSL Status</a><a target="_blank" rel="external nofollow noopener noreferrer" href="https://mhuig.instatus.com/">Status Monitors</a></div><div class="sitemap-group"><span class="fs14">社交</span><a target="_blank" rel="noopener" href="https://blog.mhuig.top/pages/friends/">友链</a><a target="_blank" rel="noopener" href="https://blog.mhuig.top/pages/about/">留言板</a></div><div class="sitemap-group"><span class="fs14">更多</span><a target="_blank" rel="noopener" href="https://mhuig.top/">关于我</a><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/MHuiG">GitHub</a><a href="/contact/">Contact</a><a href="/privacy-policy/">隐私政策</a></div></div><div class="text"><p>本站由 <a target="_blank" rel="noopener" href="https://mhuig.top/">MHuiG</a> 使用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/xaoxuu/hexo-theme-stellar">Stellar</a> 主题创建，您可以在 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/MHG-LAB/RSSBOX">GitHub</a> 找到本站源码<br>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/me-shaon/GLWTPL/blob/master/translations/LICENSE_zh-CN">GLWT（Good Luck With That，祝你好运）公共许可证</a> 许可协议，转载请注明出处。</p>
</div></footer>

      <div class="float-panel mobile-only blur" style="display:none">
  <button type="button" class="sidebar-toggle mobile" onclick="sidebar.toggle()">
    <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15301"><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 2.3 26.8 24.6 47.5 51.6 47.6h416.5v4z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15302"/><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 1.9 27.7 23.9 49.7 51.6 51.6h416.5z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15303"/></svg>
  </button>
</div>

    </div>
  </div>
  <div class="scripts">
    <script type="text/javascript">
  stellar = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // 从 butterfly 和 volantis 获得灵感
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.9.0';
  stellar.config = {
    date_suffix: {
      just: '刚刚',
      min: '分钟前',
      hour: '小时前',
      day: '天前',
      month: '个月前',
    },
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://static.mhuig.top/npm/jquery@3.5.1/dist/jquery.min.js',
    sitesjs: '/js/plugins/sites.js',
    friendsjs: '/js/plugins/friends.js',
  };

  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://static.mhuig.top/npm/vanilla-lazyload@17.3.1/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@6/swiper-bundle.min.css","js":"https://unpkg.com/swiper@6/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://static.mhuig.top/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://static.mhuig.top/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://static.mhuig.top/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.fancybox = Object.assign({"enable":true,"js":"https://static.mhuig.top/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js","css":"https://static.mhuig.top/npm/@fancyapps/ui@4.0/dist/fancybox.css","selector":".swiper-slide img,article.content img"});
  }
  if ('false' == 'true') {
    stellar.plugins.heti = Object.assign({"enable":false,"css":"https://unpkg.com/heti/umd/heti.min.css","js":"https://unpkg.com/heti/umd/heti-addon.min.js"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->



<!-- inject -->


  </div>
</body>
</html>
